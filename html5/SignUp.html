<html>
<!DOCTYPE html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">

		<!-- CSS -->
		<link rel="stylesheet" href="assets/css/reset.css">
		<link rel="stylesheet" href="assets/css/supersized.css">
		<link rel="stylesheet" href="assets/css/style.css">

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="page-container">
			<div class="form_div">
				<input type="text" name="account" class="account" placeholder="登录帐号" onkeyup="fn_keyup()">
				<input type="password" name="password" class="password" placeholder="登录密码" onkeyup="fn_keyup()">
				<input type="password" name="confirm" class="confirm" placeholder="重复密码" onkeyup="fn_keyup()">
				<input type="text" name="locality" class="locality" placeholder="所属大区" onkeyup="fn_keyup()">
				<input type="text" name="region" class="region" placeholder="所属地区" onkeyup="fn_keyup()">
				<input type="text" name="name" class="name" placeholder="真实姓名" onkeyup="fn_keyup()">
				<button type="sign_up" class="sign_up_button" onclick="fn_sign_up()">注册</button>
				<div class="error">
					<span>+</span>
				</div>
			</div>
		</div>
	</body>

	<!-- Javascript -->
	<script type="text/javascript" src="assets/js/jquery-1.11.3.min.js" ></script>
	<script type="text/javascript" src="assets/js/scripts.js" ></script>
	<script src="assets/js/supersized.3.2.7.min.js" ></script>
	<script src="assets/js/supersized-init.js" ></script>
	<script>

		function fn_keyup() {
			$(".error").fadeOut('fast');
		}

		function fn_sign_up() {
			var account = $(".account").val();
			var password = $(".password").val();
			var confirm_val = $(".confirm").val();
			var locality = $(".locality").val();
			var region = $(".region").val();
			var name = $(".name").val();

			if (password != confirm_val) {
				alert("密码不一致，请重新输入");
				return;
			}

			sign_up_request(account, password, name, locality, region, function(data, status) {
				if (!data.success) {
					alert(data.msg);
					return;
				} else if (account == "admin") {
				} else {
					if (confirm("注册成功，是否现在进入答题？")) {
						query_request(function(data, status) {
							if (!data.success) {
								alert(data.msg);
								return;
							}
							get_topics_request(function(data, status) {
								if (!data.success) {
									alert(data.msg);
									return;
								}
								storage();
								location.href = "SelectType.html";
							});
						});
					} else {
						location.href = "index.html";
					}

				}
			});
		}
	</script>
</html>

